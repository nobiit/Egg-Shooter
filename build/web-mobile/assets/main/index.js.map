{"version":3,"sources":["../../file:/Volumes/Workspace/EggShooter/assets/Script/background_scaler.ts","../../file:/Volumes/Workspace/EggShooter/assets/Script/game_ui.ts","../../file:/Volumes/Workspace/EggShooter/assets/Script/fix_position.ts","../../file:/Volumes/Workspace/EggShooter/assets/Script/egg_stack.ts","../../file:/Volumes/Workspace/EggShooter/assets/Script/slingshot.ts","../../file:/Volumes/Workspace/EggShooter/assets/Script/utils.ts"],"names":["_dec","_dec2","_class","_class2","_RF","push","undefined","ccclass","_decorator","Bind","lodashDecorators","_applyDecoratedDescriptor","_Component","BackgroundScaler","_this","_len","arguments","length","args","Array","_key","call","apply","this","concat","_defineProperty","_assertThisInitialized","_inheritsLoose","_proto","prototype","onResized","width","deviceSize","scale","height","uiTransform","setContentSize","start","sprite","nonNull","getComponent","Sprite","registerOnReSized","bind","_createClass","key","get","node","UITransform","_nonNull","spriteFrame","size","view","getFrameSize","spriteSize","Component","Object","getOwnPropertyDescriptor","pop","_descriptor","property","type","Label","GameUI","_initializerDefineProperty","onEnable","_this2","setScore","setInterval","addScore","value","scoreLabel","string","toString","score","parseInt","Number","isNaN","_","configurable","enumerable","writable","initializer","_dec3","_dec4","_dec5","_dec6","_dec7","_dec8","_descriptor2","_descriptor3","_descriptor4","Memoize","Node","FixPosition","fixPositionScore","fixPositionFooter","fixPositionEggStack","fixPositionRope","getScorePositionY","position","y","getRopePositionY","rope","setPosition","x","delta_y","footer","eggStack","Canvas","canvas","canvasSize","EggStack","onLoad","preloadResources","nodes","createGrid","maxEggType","loadSpriteFrames","addRow","startTimer","timer","destroy","clearInterval","update","_step","_iterator","_createForOfIteratorHelperLoose","keys","data","done","_step2","_iterator2","_y","rows","v","spriteFrames","randomEggType","_this3","types","range","flatMap","countOfEggType","fill","sample","isCollision","p","i","resources","preload","SpriteFrame","funcValue","_this4","isFull","columns","map","parent","_step4","_iterator4","row","layer","_step5","items","_iterator5","item","px","eggItemSize","py","addComponent","_this5","_loop","load","err","res","Math","floor","Slingshot","getComponentInChildren","egg","reset","on","EventType","TOUCH_START","startDrag","TOUCH_END","stopDrag","TOUCH_MOVE","moveDrag","eggLines","shift","setWorldPosition","eggType","setTimeout","e","isDragging","location","getUILocation","o","getWorldPosition","angle","getAngle","isAcceptAngle","buildLineForEgg","computePosition","ox","max_y","isNull","isUndefined","Error","listener","sys","isMobile","window","addEventListener","rad2Reg","PI","reg2Rad","a","b","atan2","n","cos","sin"],"mappings":"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","file":"all.js","sourcesContent":["import { createClass as _createClass } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { assertThisInitialized as _assertThisInitialized } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inheritsLoose as _inheritsLoose } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { defineProperty as _defineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { applyDecoratedDescriptor as _applyDecoratedDescriptor } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _dec2, _class, _class2, _temp;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"33cdaToOV9GvJ9jQgYT5rKf\", \"background_scaler\", undefined);\n\nimport { _decorator, view, size, Component, Sprite, UITransform } from 'cc';\nimport lodashDecorators from 'lodash-decorators';\nimport { nonNull, registerOnReSized } from './utils';\nvar ccclass = _decorator.ccclass;\nvar Bind = lodashDecorators.Bind;\nexport var BackgroundScaler = (_dec = ccclass('BackgroundScaler'), _dec2 = Bind(), _dec(_class = (_class2 = (_temp = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(BackgroundScaler, _Component);\n\n  function BackgroundScaler() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"sprite\", void 0);\n\n    return _this;\n  }\n\n  var _proto = BackgroundScaler.prototype;\n\n  _proto.onResized = function onResized() {\n    var width = this.deviceSize.width * this.scale;\n    var height = this.deviceSize.height * this.scale;\n    this.uiTransform.setContentSize(width, height);\n  };\n\n  _proto.start = function start() {\n    this.sprite = nonNull(this.getComponent(Sprite));\n    return registerOnReSized(this.onResized.bind(this));\n  };\n\n  _createClass(BackgroundScaler, [{\n    key: \"uiTransform\",\n    get: function get() {\n      return nonNull(this.node.getComponent(UITransform));\n    }\n  }, {\n    key: \"spriteSize\",\n    get: function get() {\n      var _nonNull = nonNull(nonNull(this.sprite).spriteFrame),\n          width = _nonNull.width,\n          height = _nonNull.height;\n\n      return size(width, height);\n    }\n  }, {\n    key: \"deviceSize\",\n    get: function get() {\n      return view.getFrameSize();\n    }\n  }, {\n    key: \"scale\",\n    get: function get() {\n      return this.spriteSize.width / this.deviceSize.width;\n    }\n  }]);\n\n  return BackgroundScaler;\n}(Component), _temp), (_applyDecoratedDescriptor(_class2.prototype, \"onResized\", [_dec2], Object.getOwnPropertyDescriptor(_class2.prototype, \"onResized\"), _class2.prototype)), _class2)) || _class);\n\n_cclegacy._RF.pop();","import { initializerDefineProperty as _initializerDefineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createClass as _createClass } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { assertThisInitialized as _assertThisInitialized } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inheritsLoose as _inheritsLoose } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { defineProperty as _defineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { applyDecoratedDescriptor as _applyDecoratedDescriptor } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerWarningHelper as _initializerWarningHelper } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _dec2, _class, _class2, _descriptor, _temp;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"4d9c6hHj1NJt5BUvXZdcTGd\", \"game_ui\", undefined);\n\nimport { _decorator, Component, Label } from 'cc';\nimport { nonNull } from './utils';\nvar ccclass = _decorator.ccclass,\n    property = _decorator.property;\nexport var GameUI = (_dec = ccclass('GameUI'), _dec2 = property({\n  type: Label\n}), _dec(_class = (_class2 = (_temp = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(GameUI, _Component);\n\n  function GameUI() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"scoreLabel\", _descriptor, _assertThisInitialized(_this));\n\n    return _this;\n  }\n\n  var _proto = GameUI.prototype;\n\n  _proto.onEnable = function onEnable() {\n    var _this2 = this;\n\n    this.setScore();\n    setInterval(function () {\n      return _this2.addScore(1);\n    }, 100);\n  };\n\n  _proto.setScore = function setScore(value) {\n    if (value === void 0) {\n      value = 0;\n    }\n\n    if (value < 0 || value >= 1e6) {\n      return this.setScore(0);\n    }\n\n    if (this.scoreLabel) {\n      this.scoreLabel.string = value.toString();\n    }\n  };\n\n  _proto.addScore = function addScore(value) {\n    this.setScore(this.score + value);\n  };\n\n  _createClass(GameUI, [{\n    key: \"score\",\n    get: function get() {\n      try {\n        var value = parseInt(nonNull(this.scoreLabel).string);\n\n        if (!Number.isNaN(value)) {\n          return value;\n        }\n      } catch (_) {// Ignored\n      }\n\n      return 0;\n    }\n  }]);\n\n  return GameUI;\n}(Component), _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"scoreLabel\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class2)) || _class);\n\n_cclegacy._RF.pop();","import { initializerDefineProperty as _initializerDefineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createClass as _createClass } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { assertThisInitialized as _assertThisInitialized } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inheritsLoose as _inheritsLoose } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { defineProperty as _defineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { applyDecoratedDescriptor as _applyDecoratedDescriptor } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerWarningHelper as _initializerWarningHelper } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _temp;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"ac714f4Qg9Md7USVPdypz6S\", \"fix_position\", undefined);\n\nimport { _decorator, Component, Node, Canvas, view, size, UITransform } from 'cc';\nimport lodashDecorators from 'lodash-decorators';\nimport { nonNull, registerOnReSized } from './utils';\nvar ccclass = _decorator.ccclass,\n    property = _decorator.property;\nvar Bind = lodashDecorators.Bind,\n    Memoize = lodashDecorators.Memoize;\nexport var FixPosition = (_dec = ccclass('FixPosition'), _dec2 = property({\n  type: Node\n}), _dec3 = property({\n  type: Node\n}), _dec4 = property({\n  type: Node\n}), _dec5 = property({\n  type: Node\n}), _dec6 = Bind(), _dec7 = Memoize(), _dec8 = Memoize(), _dec(_class = (_class2 = (_temp = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(FixPosition, _Component);\n\n  function FixPosition() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"score\", _descriptor, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"footer\", _descriptor2, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"eggStack\", _descriptor3, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"rope\", _descriptor4, _assertThisInitialized(_this));\n\n    return _this;\n  }\n\n  var _proto = FixPosition.prototype;\n\n  _proto.onResized = function onResized() {\n    this.fixPositionScore();\n    this.fixPositionFooter();\n    this.fixPositionEggStack();\n    this.fixPositionRope();\n  };\n\n  _proto.getScorePositionY = function getScorePositionY() {\n    return nonNull(this.score).position.y;\n  };\n\n  _proto.getRopePositionY = function getRopePositionY() {\n    return nonNull(this.rope).position.y;\n  };\n\n  _proto.start = function start() {\n    return registerOnReSized(this.onResized.bind(this));\n  };\n\n  _proto.fixPositionScore = function fixPositionScore() {\n    if (this.score) {\n      this.score.setPosition(this.score.position.x, this.getScorePositionY() + this.delta_y);\n    }\n  };\n\n  _proto.fixPositionFooter = function fixPositionFooter() {\n    if (this.footer) {\n      this.footer.setPosition(this.footer.position.x, -this.delta_y);\n    }\n  };\n\n  _proto.fixPositionEggStack = function fixPositionEggStack() {\n    if (this.eggStack) {\n      var uiTransform = nonNull(this.eggStack.getComponent(UITransform));\n      var height = uiTransform.height + this.delta_y * 2;\n      uiTransform.setContentSize(uiTransform.width, height);\n    }\n  };\n\n  _proto.fixPositionRope = function fixPositionRope() {\n    if (this.rope) {\n      this.rope.setPosition(this.rope.position.x, this.getRopePositionY() - this.delta_y);\n    }\n  };\n\n  _createClass(FixPosition, [{\n    key: \"canvas\",\n    get: function get() {\n      return nonNull(this.getComponent(Canvas));\n    }\n  }, {\n    key: \"canvasSize\",\n    get: function get() {\n      var _nonNull = nonNull(this.canvas.getComponent(UITransform)),\n          width = _nonNull.width,\n          height = _nonNull.height;\n\n      return size(width, height);\n    }\n  }, {\n    key: \"deviceSize\",\n    get: function get() {\n      return view.getFrameSize();\n    }\n  }, {\n    key: \"scale\",\n    get: function get() {\n      return this.canvasSize.x / this.deviceSize.x;\n    }\n  }, {\n    key: \"delta_y\",\n    get: function get() {\n      return (this.deviceSize.y * this.scale - this.canvasSize.y) / 2;\n    }\n  }]);\n\n  return FixPosition;\n}(Component), _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"score\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"footer\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"eggStack\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, \"rope\", [_dec5], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _applyDecoratedDescriptor(_class2.prototype, \"onResized\", [_dec6], Object.getOwnPropertyDescriptor(_class2.prototype, \"onResized\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"getScorePositionY\", [_dec7], Object.getOwnPropertyDescriptor(_class2.prototype, \"getScorePositionY\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"getRopePositionY\", [_dec8], Object.getOwnPropertyDescriptor(_class2.prototype, \"getRopePositionY\"), _class2.prototype)), _class2)) || _class);\n\n_cclegacy._RF.pop();","import { createForOfIteratorHelperLoose as _createForOfIteratorHelperLoose } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createClass as _createClass } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { assertThisInitialized as _assertThisInitialized } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inheritsLoose as _inheritsLoose } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { defineProperty as _defineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _class, _temp;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"ca9b2GN/GJBkY3f+S8apWVe\", \"egg_stack\", undefined);\n\nimport { _decorator, Component, Node, resources, SpriteFrame, UITransform, Sprite, Canvas } from 'cc';\nimport _ from 'lodash';\nimport { nonNull } from './utils';\nvar ccclass = _decorator.ccclass;\nexport var EggStack = (_dec = ccclass('EggStack'), _dec(_class = (_temp = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(EggStack, _Component);\n\n  function EggStack() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"spriteFrames\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"countOfEggType\", 16);\n\n    _defineProperty(_assertThisInitialized(_this), \"eggItemSize\", 64);\n\n    _defineProperty(_assertThisInitialized(_this), \"data\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"maxEggType\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"nodes\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"timer\", void 0);\n\n    return _this;\n  }\n\n  var _proto = EggStack.prototype;\n\n  _proto.onLoad = function onLoad() {\n    this.preloadResources();\n  };\n\n  _proto.start = function start() {\n    this.nodes = this.createGrid(this.node);\n    this.maxEggType = 3;\n    this.loadSpriteFrames();\n    this.addRow(5);\n  };\n\n  _proto.startTimer = function startTimer() {\n    var _this2 = this;\n\n    this.timer = setInterval(function () {\n      return _this2.addRow();\n    }, 15 * 1000);\n  };\n\n  _proto.destroy = function destroy() {\n    clearInterval(this.timer);\n    return _Component.prototype.destroy.call(this);\n  };\n\n  _proto.update = function update() {\n    for (var _iterator = _createForOfIteratorHelperLoose(_.keys(this.data)), _step; !(_step = _iterator()).done;) {\n      var y = _step.value;\n\n      for (var _iterator2 = _createForOfIteratorHelperLoose(_.keys(_.get(this.data, y))), _step2; !(_step2 = _iterator2()).done;) {\n        var x = _step2.value;\n\n        var _y = this.rows - this.data.length + ~~y;\n\n        var node = _.get(this.nodes, [_y, x]);\n\n        var sprite = nonNull(node.getComponent(Sprite));\n\n        var v = _.get(this.data, [y, x]);\n\n        sprite.spriteFrame = this.spriteFrames[v];\n      }\n    }\n  };\n\n  _proto.randomEggType = function randomEggType() {\n    var _this3 = this;\n\n    var types = _.range(1, this.maxEggType + 1);\n\n    types = _.flatMap(types, function (x) {\n      return Array(_this3.countOfEggType - x).fill(x);\n    });\n    return nonNull(_.sample(types));\n  };\n\n  _proto.isCollision = function isCollision(p) {\n    return false; // TODO: Kiểm tra xem có chạm với 1 quả bóng đã tồn tại hay chưa\n\n    for (var _iterator3 = _createForOfIteratorHelperLoose(this.nodes), _step3; !(_step3 = _iterator3()).done;) {\n      var items = _step3.value;\n      var firstItem = items.find(function (x) {\n        var _x$getComponent;\n\n        return (_x$getComponent = x.getComponent(Sprite)) === null || _x$getComponent === void 0 ? void 0 : _x$getComponent.spriteFrame;\n      });\n\n      if (firstItem && firstItem.position.y <= p.y && firstItem.position.y + this.eggItemSize >= p.y) {\n        console.log(firstItem.position.x, firstItem.position.y);\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  _proto.preloadResources = function preloadResources() {\n    for (var i = 1; i <= this.countOfEggType; i++) {\n      resources.preload(\"egg/egg_\" + i + \"/spriteFrame\", SpriteFrame);\n    }\n  };\n\n  _proto.addRow = function addRow(rows, funcValue) {\n    var _this4 = this;\n\n    if (rows === void 0) {\n      rows = 2;\n    }\n\n    if (funcValue === void 0) {\n      funcValue = function funcValue() {\n        return _this4.randomEggType();\n      };\n    }\n\n    if (!this.isFull) {\n      for (var i = 0; i < rows; i++) {\n        this.data.push(Array(this.columns - this.data.length % 2).fill(null).map(funcValue));\n      }\n    }\n  };\n\n  _proto.createGrid = function createGrid(parent) {\n    var nodes = [];\n\n    for (var _iterator4 = _createForOfIteratorHelperLoose(_.range(this.rows)), _step4; !(_step4 = _iterator4()).done;) {\n      var y = _step4.value;\n      var row = new Node();\n      row.parent = parent;\n      row.layer = row.parent.layer;\n      var items = [];\n\n      for (var _iterator5 = _createForOfIteratorHelperLoose(_.range(this.columns)), _step5; !(_step5 = _iterator5()).done;) {\n        var x = _step5.value;\n        var item = new Node();\n        item.parent = row;\n        item.layer = item.parent.layer;\n        var px = ~~x * this.eggItemSize - this.uiTransform.width / 2 + this.eggItemSize / 2;\n        var py = ~~y * this.eggItemSize - this.uiTransform.height / 2 + this.eggItemSize / 2;\n\n        if (~~y % 2) {\n          px += this.eggItemSize / 2;\n        }\n\n        item.setPosition(px, py);\n        item.addComponent(Sprite);\n        items.push(item);\n      }\n\n      nodes.push(items);\n    }\n\n    return nodes;\n  };\n\n  _proto.loadSpriteFrames = function loadSpriteFrames() {\n    var _this5 = this;\n\n    var _loop = function _loop(i) {\n      resources.load(\"egg/egg_\" + i + \"/spriteFrame\", SpriteFrame, function (err, res) {\n        if (err) {\n          throw err;\n        }\n\n        _this5.spriteFrames[i] = res;\n      });\n    };\n\n    for (var i = 1; i <= this.countOfEggType; i++) {\n      _loop(i);\n    }\n  };\n\n  _createClass(EggStack, [{\n    key: \"uiTransform\",\n    get: function get() {\n      return nonNull(this.node.getComponent(UITransform));\n    }\n  }, {\n    key: \"canvas\",\n    get: function get() {\n      var node = this.node;\n\n      while (node.parent) {\n        if (node.getComponent(Canvas)) {\n          break;\n        }\n\n        node = node.parent;\n      }\n\n      return nonNull(node.getComponent(Canvas));\n    }\n  }, {\n    key: \"rows\",\n    get: function get() {\n      return Math.floor(this.uiTransform.height / this.eggItemSize);\n    }\n  }, {\n    key: \"columns\",\n    get: function get() {\n      return Math.floor(this.uiTransform.width / this.eggItemSize);\n    }\n  }, {\n    key: \"isFull\",\n    get: function get() {\n      return this.data.length >= this.rows;\n    }\n  }]);\n\n  return EggStack;\n}(Component), _temp)) || _class);\n\n_cclegacy._RF.pop();","import { initializerDefineProperty as _initializerDefineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createClass as _createClass } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { assertThisInitialized as _assertThisInitialized } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inheritsLoose as _inheritsLoose } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { defineProperty as _defineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { applyDecoratedDescriptor as _applyDecoratedDescriptor } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerWarningHelper as _initializerWarningHelper } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _dec2, _dec3, _class, _class2, _descriptor, _descriptor2, _temp;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"e56d9ymaZ9Ltq/6ZhtUybzF\", \"slingshot\", undefined);\n\nimport { Canvas } from 'cc';\nimport { UITransform } from 'cc';\nimport { _decorator, Component, Node, Sprite, SpriteFrame } from 'cc';\nimport _ from 'lodash';\nimport { EggStack } from './egg_stack';\nimport { computePosition, getAngle, nonNull } from './utils';\nvar ccclass = _decorator.ccclass,\n    property = _decorator.property;\nexport var Slingshot = (_dec = ccclass('Slingshot'), _dec2 = property({\n  type: SpriteFrame\n}), _dec3 = property({\n  type: SpriteFrame\n}), _dec(_class = (_class2 = (_temp = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Slingshot, _Component);\n\n  function Slingshot() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"arrowHead\", _descriptor, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_assertThisInitialized(_this), \"arrowBody\", _descriptor2, _assertThisInitialized(_this));\n\n    _defineProperty(_assertThisInitialized(_this), \"isDragging\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"eggLines\", []);\n\n    return _this;\n  }\n\n  var _proto = Slingshot.prototype;\n\n  _proto.onLoad = function onLoad() {\n    var parent = nonNull(this.node.parent);\n    this.eggStack = nonNull(parent.getComponentInChildren(EggStack));\n  };\n\n  _proto.start = function start() {\n    this.egg = new Node();\n    this.egg.parent = this.node;\n    this.egg.layer = this.egg.parent.layer;\n    this.egg.addComponent(Sprite);\n    this.reset();\n    var parent = nonNull(this.node.parent);\n    parent.on(Node.EventType.TOUCH_START, this.startDrag.bind(this));\n    parent.on(Node.EventType.TOUCH_END, this.stopDrag.bind(this));\n    parent.on(Node.EventType.TOUCH_MOVE, this.moveDrag.bind(this));\n  };\n\n  _proto.update = function update() {\n    if (this.eggLines.length) {\n      var p = nonNull(this.eggLines.shift());\n      this.egg.setWorldPosition(p.x, p.y, 0);\n    }\n  };\n\n  _proto.reset = function reset() {\n    var _this2 = this;\n\n    this.egg.setPosition(0, 15);\n    var sprite = nonNull(this.egg.getComponent(Sprite));\n    var eggType = this.eggStack.randomEggType();\n\n    var spriteFrame = _.get(this.eggStack.spriteFrames, eggType);\n\n    if (!spriteFrame) {\n      return void setTimeout(function () {\n        return _this2.reset();\n      }, 100);\n    }\n\n    sprite.spriteFrame = spriteFrame;\n  };\n\n  _proto.startDrag = function startDrag(e) {\n    this.isDragging = true;\n    this.egg.setPosition(0, -50);\n    this.eggStack.startTimer();\n\n    if (e) {\n      return this.moveDrag(e);\n    }\n  };\n\n  _proto.stopDrag = function stopDrag(e) {\n    this.isDragging = false;\n    var location = e.getUILocation();\n    var o = this.node.getWorldPosition();\n    var angle = getAngle(o, location);\n\n    if (this.isAcceptAngle(angle)) {\n      this.eggLines = this.buildLineForEgg(o.x, o.y, angle);\n    }\n  };\n\n  _proto.moveDrag = function moveDrag(e) {\n    if (this.isDragging) {\n      var location = e.getUILocation();\n      var o = this.node.getWorldPosition();\n      var angle = getAngle(o, location);\n\n      if (this.isAcceptAngle(angle)) {\n        var p = computePosition(o, angle, -65);\n        this.egg.setWorldPosition(p.x, p.y, 0);\n      }\n    }\n  };\n\n  _proto.isAcceptAngle = function isAcceptAngle(value) {\n    return 20 <= value && value <= 160;\n  };\n\n  _proto.buildLineForEgg = function buildLineForEgg(x, y, angle) {\n    var items = [];\n    var ox = this.node.getWorldPosition().x;\n    var on = nonNull(this.node.getComponent(UITransform)).width + this.eggStack.eggItemSize;\n    var p = {\n      x: x,\n      y: y\n    };\n    var i = 0;\n\n    while (p.y < this.max_y) {\n      i += 1;\n      p = computePosition(p, angle, i);\n      items.push(p);\n\n      if (this.eggStack.isCollision(p)) {\n        break;\n      }\n\n      if (p.x < ox - on || p.x > ox + on) {\n        angle = angle + 90 * (angle < 90 ? 1 : -1);\n      }\n    }\n\n    return items;\n  };\n\n  _createClass(Slingshot, [{\n    key: \"max_y\",\n    get: function get() {\n      var node = this.node;\n\n      while (node.parent) {\n        if (node.getComponent(Canvas)) {\n          break;\n        }\n\n        node = node.parent;\n      }\n\n      return nonNull(node.getComponent(UITransform)).height;\n    }\n  }]);\n\n  return Slingshot;\n}(Component), _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"arrowHead\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"arrowBody\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class2)) || _class);\n\n_cclegacy._RF.pop();","var _this = this;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"f276dpJEwFF0o186e1Dc/vz\", \"utils\", undefined);\n\nimport { sys, view } from 'cc';\nimport _ from 'lodash';\nexport var nonNull = function nonNull(value) {\n  if (_.isNull(value) || _.isUndefined(value)) {\n    throw new Error('Expect are not null/undefined');\n  }\n\n  return value;\n};\nexport var registerOnReSized = function registerOnReSized(listener) {\n  if (sys.isMobile) {\n    window.addEventListener('resize', listener);\n  } else {\n    view.on('canvas-resize', listener, _this);\n  }\n\n  listener.apply(null);\n};\nexport var rad2Reg = function rad2Reg(value) {\n  return value * 180 / Math.PI;\n};\nexport var reg2Rad = function reg2Rad(value) {\n  return value / rad2Reg(1);\n};\nexport var getAngle = function getAngle(a, b) {\n  return rad2Reg(Math.atan2(b.y - a.y, b.x - a.x));\n};\nexport var computePosition = function computePosition(o, angle, n) {\n  return {\n    x: Math.cos(reg2Rad(angle)) * n + o.x,\n    y: Math.sin(reg2Rad(angle)) * n + o.y\n  };\n};\n\n_cclegacy._RF.pop();"]}