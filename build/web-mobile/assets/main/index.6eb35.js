System.register("chunks:///_virtual/background_scaler.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index.js","./index.mjs_cjs=&original=.js","./utils.ts"],(function(e){"use strict";var t,i,r,n,s,o,c,a,u,d,p,l,h,f,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.defineProperty,n=e.assertThisInitialized,s=e.createClass},function(e){o=e.cclegacy,c=e._decorator,a=e.Sprite,u=e.UITransform,d=e.size,p=e.view,l=e.Component},function(e){h=e.default},null,function(e){f=e.nonNull,g=e.registerOnReSized}],execute:function(){var v,y,z,S;o._RF.push({},"33cdaToOV9GvJ9jQgYT5rKf","background_scaler",void 0);var m=c.ccclass,k=h.Bind;e("BackgroundScaler",(v=m("BackgroundScaler"),y=k(),v((t((S=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,r(n(t),"sprite",void 0),t}i(t,e);var o=t.prototype;return o.onResized=function(){var e=this.deviceSize.width*this.scale,t=this.deviceSize.height*this.scale;this.uiTransform.setContentSize(e,t)},o.start=function(){return this.sprite=f(this.getComponent(a)),g(this.onResized.bind(this))},s(t,[{key:"uiTransform",get:function(){return f(this.node.getComponent(u))}},{key:"spriteSize",get:function(){var e=f(f(this.sprite).spriteFrame),t=e.width,i=e.height;return d(t,i)}},{key:"deviceSize",get:function(){return p.getFrameSize()}},{key:"scale",get:function(){return this.spriteSize.width/this.deviceSize.width}}]),t}(l)).prototype,"onResized",[y],Object.getOwnPropertyDescriptor(S.prototype,"onResized"),S.prototype),z=S))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/game_ui.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./utils.ts"],(function(e){"use strict";var t,r,i,n,o,s,c,a,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){s=e.cclegacy,c=e._decorator,a=e.Label,u=e.Component},function(e){l=e.nonNull}],execute:function(){var p,f,h,d,b;s._RF.push({},"4d9c6hHj1NJt5BUvXZdcTGd","game_ui",void 0);var v=c.ccclass,y=c.property;e("GameUI",(p=v("GameUI"),f=y({type:a}),p((b=t((d=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,i(n(t),"scoreLabel",b,n(t)),t}r(t,e);var s=t.prototype;return s.onEnable=function(){var e=this;this.setScore(),setInterval((function(){return e.addScore(1)}),100)},s.setScore=function(e){if(void 0===e&&(e=0),e<0||e>=1e6)return this.setScore(0);this.scoreLabel&&(this.scoreLabel.string=e.toString())},s.addScore=function(e){this.setScore(this.score+e)},o(t,[{key:"score",get:function(){try{var e=parseInt(l(this.scoreLabel).string);if(!Number.isNaN(e))return e}catch(e){}return 0}}]),t}(u)).prototype,"scoreLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=d))||h));s._RF.pop()}}}));

System.register("chunks:///_virtual/fix_position.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./index.js","./index.mjs_cjs=&original=.js","./utils.ts"],(function(t){"use strict";var e,i,o,n,r,s,c,p,a,u,l,f,g,h,y,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,c=t._decorator,p=t.Node,a=t.UITransform,u=t.Canvas,l=t.size,f=t.view,g=t.Component},function(t){h=t.default},null,function(t){y=t.nonNull,d=t.registerOnReSized}],execute:function(){var P,S,z,x,v,b,m,R,_,k,w,j,Y,C;s._RF.push({},"ac714f4Qg9Md7USVPdypz6S","fix_position",void 0);var F=c.ccclass,O=c.property,D=h.Bind,M=h.Memoize;t("FixPosition",(P=F("FixPosition"),S=O({type:p}),z=O({type:p}),x=O({type:p}),v=O({type:p}),b=D(),m=M(),R=M(),P((w=e((k=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(n(e),"score",w,n(e)),o(n(e),"footer",j,n(e)),o(n(e),"eggStack",Y,n(e)),o(n(e),"rope",C,n(e)),e}i(e,t);var s=e.prototype;return s.onResized=function(){this.fixPositionScore(),this.fixPositionFooter(),this.fixPositionEggStack(),this.fixPositionRope()},s.getScorePositionY=function(){return y(this.score).position.y},s.getRopePositionY=function(){return y(this.rope).position.y},s.start=function(){return d(this.onResized.bind(this))},s.fixPositionScore=function(){this.score&&this.score.setPosition(this.score.position.x,this.getScorePositionY()+this.delta_y)},s.fixPositionFooter=function(){this.footer&&this.footer.setPosition(this.footer.position.x,-this.delta_y)},s.fixPositionEggStack=function(){if(this.eggStack){var t=y(this.eggStack.getComponent(a)),e=t.height+2*this.delta_y;t.setContentSize(t.width,e)}},s.fixPositionRope=function(){this.rope&&this.rope.setPosition(this.rope.position.x,this.getRopePositionY()-this.delta_y)},r(e,[{key:"canvas",get:function(){return y(this.getComponent(u))}},{key:"canvasSize",get:function(){var t=y(this.canvas.getComponent(a)),e=t.width,i=t.height;return l(e,i)}},{key:"deviceSize",get:function(){return f.getFrameSize()}},{key:"scale",get:function(){return this.canvasSize.x/this.deviceSize.x}},{key:"delta_y",get:function(){return(this.deviceSize.y*this.scale-this.canvasSize.y)/2}}]),e}(g)).prototype,"score",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(k.prototype,"footer",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(k.prototype,"eggStack",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(k.prototype,"rope",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),e(k.prototype,"onResized",[b],Object.getOwnPropertyDescriptor(k.prototype,"onResized"),k.prototype),e(k.prototype,"getScorePositionY",[m],Object.getOwnPropertyDescriptor(k.prototype,"getScorePositionY"),k.prototype),e(k.prototype,"getRopePositionY",[R],Object.getOwnPropertyDescriptor(k.prototype,"getRopePositionY"),k.prototype),_=k))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/egg_stack.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./lodash.js","./lodash.mjs_cjs=&original=.js","./utils.ts"],(function(t){"use strict";var e,r,n,i,o,a,s,u,g,h,c,l,f,p,d,m;return{setters:[function(t){e=t.inheritsLoose,r=t.createForOfIteratorHelperLoose,n=t.createClass,i=t.defineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,u=t.Sprite,g=t.resources,h=t.SpriteFrame,c=t.Node,l=t.Component,f=t.UITransform,p=t.Canvas},function(t){d=t.default},null,function(t){m=t.nonNull}],execute:function(){var v;a._RF.push({},"ca9b2GN/GJBkY3f+S8apWVe","egg_stack",void 0);var y=s.ccclass;t("EggStack",y("EggStack")(v=function(t){function a(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,i(o(e),"spriteFrames",[]),i(o(e),"countOfEggType",16),i(o(e),"eggItemSize",64),i(o(e),"data",[]),i(o(e),"maxEggType",0),i(o(e),"nodes",[]),i(o(e),"timer",void 0),e}e(a,t);var s=a.prototype;return s.onLoad=function(){this.preloadResources()},s.start=function(){this.nodes=this.createGrid(this.node),this.maxEggType=3,this.loadSpriteFrames(),this.addRow(5)},s.startTimer=function(){var t=this;this.timer=setInterval((function(){return t.addRow()}),15e3)},s.destroy=function(){return clearInterval(this.timer),t.prototype.destroy.call(this)},s.update=function(){for(var t,e=r(d.keys(this.data));!(t=e()).done;)for(var n,i=t.value,o=r(d.keys(d.get(this.data,i)));!(n=o()).done;){var a=n.value,s=this.rows-this.data.length+~~i,g=d.get(this.nodes,[s,a]),h=m(g.getComponent(u)),c=d.get(this.data,[i,a]);h.spriteFrame=this.spriteFrames[c]}},s.randomEggType=function(){var t=this,e=d.range(1,this.maxEggType+1);return e=d.flatMap(e,(function(e){return Array(t.countOfEggType-e).fill(e)})),m(d.sample(e))},s.isCollision=function(t){return!1},s.preloadResources=function(){for(var t=1;t<=this.countOfEggType;t++)g.preload("egg/egg_"+t+"/spriteFrame",h)},s.addRow=function(t,e){var r=this;if(void 0===t&&(t=2),void 0===e&&(e=function(){return r.randomEggType()}),!this.isFull)for(var n=0;n<t;n++)this.data.push(Array(this.columns-this.data.length%2).fill(null).map(e))},s.createGrid=function(t){for(var e,n=[],i=r(d.range(this.rows));!(e=i()).done;){var o=e.value,a=new c;a.parent=t,a.layer=a.parent.layer;for(var s,g=[],h=r(d.range(this.columns));!(s=h()).done;){var l=s.value,f=new c;f.parent=a,f.layer=f.parent.layer;var p=~~l*this.eggItemSize-this.uiTransform.width/2+this.eggItemSize/2,m=~~o*this.eggItemSize-this.uiTransform.height/2+this.eggItemSize/2;~~o%2&&(p+=this.eggItemSize/2),f.setPosition(p,m),f.addComponent(u),g.push(f)}n.push(g)}return n},s.loadSpriteFrames=function(){for(var t=this,e=function(e){g.load("egg/egg_"+e+"/spriteFrame",h,(function(r,n){if(r)throw r;t.spriteFrames[e]=n}))},r=1;r<=this.countOfEggType;r++)e(r)},n(a,[{key:"uiTransform",get:function(){return m(this.node.getComponent(f))}},{key:"canvas",get:function(){for(var t=this.node;t.parent&&!t.getComponent(p);)t=t.parent;return m(t.getComponent(p))}},{key:"rows",get:function(){return Math.floor(this.uiTransform.height/this.eggItemSize)}},{key:"columns",get:function(){return Math.floor(this.uiTransform.width/this.eggItemSize)}},{key:"isFull",get:function(){return this.data.length>=this.rows}}]),a}(l))||v);a._RF.pop()}}}));

System.register("chunks:///_virtual/slingshot.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./lodash.js","./lodash.mjs_cjs=&original=.js","./utils.ts","./egg_stack.ts"],(function(t){"use strict";var e,i,n,o,s,r,g,a,h,c,l,p,u,d,f,y,m,v,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.defineProperty,r=t.createClass},function(t){g=t.cclegacy,a=t._decorator,h=t.SpriteFrame,c=t.Node,l=t.Sprite,p=t.UITransform,u=t.Canvas,d=t.Component},function(t){f=t.default},null,function(t){y=t.nonNull,m=t.getAngle,v=t.computePosition},function(t){D=t.EggStack}],execute:function(){var C,S,b,T,L,_,P;g._RF.push({},"e56d9ymaZ9Ltq/6ZhtUybzF","slingshot",void 0);var k=a.ccclass,x=a.property;t("Slingshot",(C=k("Slingshot"),S=x({type:h}),b=x({type:h}),C((_=e((L=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),g=0;g<i;g++)r[g]=arguments[g];return e=t.call.apply(t,[this].concat(r))||this,n(o(e),"arrowHead",_,o(e)),n(o(e),"arrowBody",P,o(e)),s(o(e),"isDragging",!1),s(o(e),"eggLines",[]),e}i(e,t);var g=e.prototype;return g.onLoad=function(){var t=y(this.node.parent);this.eggStack=y(t.getComponentInChildren(D))},g.start=function(){this.egg=new c,this.egg.parent=this.node,this.egg.layer=this.egg.parent.layer,this.egg.addComponent(l),this.reset();var t=y(this.node.parent);t.on(c.EventType.TOUCH_START,this.startDrag.bind(this)),t.on(c.EventType.TOUCH_END,this.stopDrag.bind(this)),t.on(c.EventType.TOUCH_MOVE,this.moveDrag.bind(this))},g.update=function(){if(this.eggLines.length){var t=y(this.eggLines.shift());this.egg.setWorldPosition(t.x,t.y,0)}},g.reset=function(){var t=this;this.egg.setPosition(0,15);var e=y(this.egg.getComponent(l)),i=this.eggStack.randomEggType(),n=f.get(this.eggStack.spriteFrames,i);n?e.spriteFrame=n:setTimeout((function(){return t.reset()}),100)},g.startDrag=function(t){if(this.isDragging=!0,this.egg.setPosition(0,-50),this.eggStack.startTimer(),t)return this.moveDrag(t)},g.stopDrag=function(t){this.isDragging=!1;var e=t.getUILocation(),i=this.node.getWorldPosition(),n=m(i,e);this.isAcceptAngle(n)&&(this.eggLines=this.buildLineForEgg(i.x,i.y,n))},g.moveDrag=function(t){if(this.isDragging){var e=t.getUILocation(),i=this.node.getWorldPosition(),n=m(i,e);if(this.isAcceptAngle(n)){var o=v(i,n,-65);this.egg.setWorldPosition(o.x,o.y,0)}}},g.isAcceptAngle=function(t){return 20<=t&&t<=160},g.buildLineForEgg=function(t,e,i){for(var n=[],o=this.node.getWorldPosition().x,s=y(this.node.getComponent(p)).width+this.eggStack.eggItemSize,r={x:t,y:e},g=0;r.y<this.max_y&&(r=v(r,i,g+=1),n.push(r),!this.eggStack.isCollision(r));)(r.x<o-s||r.x>o+s)&&(i+=90*(i<90?1:-1));return n},r(e,[{key:"max_y",get:function(){for(var t=this.node;t.parent&&!t.getComponent(u);)t=t.parent;return y(t.getComponent(p)).height}}]),e}(d)).prototype,"arrowHead",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(L.prototype,"arrowBody",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=L))||T));g._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc","./lodash.js","./lodash.mjs_cjs=&original=.js"],(function(n){"use strict";var e,t,i,r;return{setters:[function(n){e=n.cclegacy,t=n.sys,i=n.view},function(n){r=n.default},null],execute:function(){e._RF.push({},"f276dpJEwFF0o186e1Dc/vz","utils",void 0);n("nonNull",(function(n){if(r.isNull(n)||r.isUndefined(n))throw new Error("Expect are not null/undefined");return n})),n("registerOnReSized",(function(n){t.isMobile?window.addEventListener("resize",n):i.on("canvas-resize",n,undefined),n.apply(null)}));var u=n("rad2Reg",(function(n){return 180*n/Math.PI})),s=n("reg2Rad",(function(n){return n/u(1)}));n("getAngle",(function(n,e){return u(Math.atan2(e.y-n.y,e.x-n.x))})),n("computePosition",(function(n,e,t){return{x:Math.cos(s(e))*t+n.x,y:Math.sin(s(e))*t+n.y}}));e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./utils.ts","./background_scaler.ts","./game_ui.ts","./fix_position.ts","./egg_stack.ts","./slingshot.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=index.js.map